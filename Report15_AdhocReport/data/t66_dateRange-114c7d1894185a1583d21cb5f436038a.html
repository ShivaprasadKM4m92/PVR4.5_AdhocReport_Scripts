//# sourceMappingURL=dateRange.js.map
DATE_RANGE_ENUM={CUSTOM:"CUSTOM",CUMULATIVE:"CUMULATIVE",RELATIVE:"RELATIVE"};X_OPERATOR_ENUMS={LAST_X_DAYS:"LAST_X_DAYS",LAST_X_WEEKS:"LAST_X_WEEKS",LAST_X_MONTHS:"LAST_X_MONTHS",LAST_X_YEARS:"LAST_X_YEARS",NEXT_X_DAYS:"NEXT_X_DAYS",NEXT_X_WEEKS:"NEXT_X_WEEKS",NEXT_X_MONTHS:"NEXT_X_MONTHS",NEXT_X_YEARS:"NEXT_X_YEARS"};DATE_RANGE_TYPE={SUBMISSION_DATE:$.i18n._("app.dataRangeType.submissionDate")};
$(document).ready(function(){function a(){$.ajax({url:fetchDateRangeTypesUrl,data:{dataSourceId:g.val()},success:function(a){e($("#dateRangeType"),a).on("change",function(a){checkDateRangeType(c)}).trigger("change")}})}function b(){$.ajax({url:fetchEvaluateCaseDatesUrl,data:{dataSourceId:g.val()},success:function(a){e($("#evaluateDateAsNonSubmission"),a).on("change",function(a){checkForDatePickerValue(c)}).trigger("change")}})}function f(){$.ajax({url:fetchEvaluateCaseDateForSubmissionUrl,data:{dataSourceId:g.val()},
success:function(a){e($("#evaluateDateAsSubmissionDate"),a).on("change",function(a){checkDateRangeType(c)}).trigger("change")}})}function e(a,b){var e=a.data("value");a.select2("destroy").empty().trigger("change");var c,d;for(d=0;d<b.length;d++){c=b[d];var f=new Option(c.display,c.name);c.name==e&&(f.selected=!0);a.append(f)}return a.select2()}initializeAsOfDate();document.getElementById("evaluateDateAs")&&"VERSION_ASOF"===document.getElementById("evaluateDateAs").value?$("#asOfVersionDatePicker").show():
$("#asOfVersionDatePicker").hide();var d="true"===$("#fromTemplate").val(),c=$("#includeLockedVersion").prop("checked");d||($("#evaluateDateAsNonSubmission").select2().on("change",function(a){checkForDatePickerValue(c)}),$("#evaluateDateAsSubmissionDate").select2().on("change",function(a){checkDateRangeType(c)}));var h=$("#useCaseSeries");0<h.length&&bindSelect2WithUrl(h,executedCaseSeriesListUrl,executedCaseSeriesItemUrl,!0).on("change",function(a){a=$("#evaluateDateAsNonSubmission");var b=$("#evaluateDateAsSubmissionDate");
""!=$(this).val()?($(this).parent().width("90%"),$("div.viewCaseLink").show(),a.val(a.find("option:first-child").val()).trigger("change"),b.val(b.find("option:first-child").val()).trigger("change"),a.prop("disabled",!0),b.prop("disabled",!0)):($(this).parent().width("100%"),$("div.viewCaseLink").hide(),a.prop("disabled",d),b.prop("disabled",d))}).change();$(".viewCaseLink").click(function(){window.open(caseListUrl+"?cid="+$("#useCaseSeries").val(),"_blank")});$(document).on("change","#dateRangeType",
function(){checkDateRangeType(c)});var g=$("[name='sourceProfile.id']");g.on("change",function(c){a();d||(b(),f())}).change();checkDateRangeInEdit(document);checkDateRangeType();d||(checkSuspectProduct(),checkHeaderProductSelection())});
function initializeAsOfDate(){var a=null;$("#asOfVersionDate").val()&&(a=$("#asOfVersionDate").val());$("#asOfVersionDatePicker").datepicker({allowPastDates:!0,date:a,twoDigitYearProtection:!0,momentConfig:{culture:userLocale,format:DEFAULT_DATE_DISPLAY_FORMAT}})}
function checkForDatePickerValue(a){var b=$("#evaluateDateAsNonSubmission").select2("val");checkDateRangeType(a);b&&0<$("#evaluateDateAsNonSubmission option").size()?-1!=b.toLowerCase().indexOf("as")?$("#asOfVersionDatePicker").show():$("#asOfVersionDatePicker").hide():$("#asOfVersionDatePicker").hide()}function checkDateRangeInEdit(a){var b=$(a).find(".dateRange");_.each(b,function(f,e){e<b.length-1&&dateRangeChangedAction(a,parseInt(e))})}
function checkDateRangeType(a){$("#dateRangeType option:selected").html()===DATE_RANGE_TYPE.SUBMISSION_DATE?($("#evaluateDateAs").val($("#evaluateDateAsSubmissionDate").val()),checkIncludeLockedVersions($("#evaluateDateAs").val(),a),$("#evaluateDateAsDiv").hide(),$("#evaluateDateAsSubmissionDateDiv").show(),$("#asOfVersionDatePicker").hide()):($("#evaluateDateAs").val($("#evaluateDateAsNonSubmission").val()),checkIncludeLockedVersions($("#evaluateDateAs").val(),a),$("#evaluateDateAsDiv").show(),$("#evaluateDateAsSubmissionDateDiv").hide())}
function checkIncludeLockedVersions(a,b){-1!=a.toLowerCase().indexOf("latest")||-1!=a.toLowerCase().indexOf("all_")?($("#includeLockedVersion").removeAttr("disabled"),0==b&&$("#includeLockedVersion").prop("checked",!1)):$("#includeLockedVersion").prop("checked",!0).attr("disabled",!0)}function daraRangeEnumClassOnChange(a){a=a.id.replace(/[^0-9\.]+/g,"");dateRangeChangedAction(document,parseInt(a))}
function dateRangeChangedAction(a,b){var f=$(a.getElementById("templateQueries["+b+"].datePickerFromDiv")),e=$(a.getElementById("templateQueries["+b+"].datePickerToDiv")),d=$(a.getElementById("templateQueries["+b+"].dateRangeInformationForTemplateQuery.relativeDateRangeValue")),c=a.getElementById("templateQueries["+b+"].dateRangeInformationForTemplateQuery.dateRangeEnum").value;c===DATE_RANGE_ENUM.CUSTOM?(initializeDatePickersForEdit(a,b),f.show(),e.show(),d.hide()):c===DATE_RANGE_ENUM.CUMULATIVE?
(f.hide(),e.hide(),d.hide()):(_.contains(X_OPERATOR_ENUMS,c)?d.show():d.hide(),f.hide(),e.hide())}
function initializeDatePickersForEdit(a,b){var f=null,e=null,d=a.getElementById("templateQueries["+b+"].dateRangeInformationForTemplateQuery.dateRangeStartAbsolute"),c=a.getElementById("templateQueries["+b+"].dateRangeInformationForTemplateQuery.dateRangeEndAbsolute");d.value&&(f=d.value);c.value&&(e=c.value);$(a.getElementById("templateQueries["+b+"].datePickerFromDiv")).datepicker({allowPastDates:!0,date:f,twoDigitYearProtection:!0,momentConfig:{culture:userLocale,format:DEFAULT_DATE_DISPLAY_FORMAT}});
$(a.getElementById("templateQueries["+b+"].datePickerToDiv")).datepicker({allowPastDates:!0,date:e,twoDigitYearProtection:!0,momentConfig:{culture:userLocale,format:DEFAULT_DATE_DISPLAY_FORMAT}})}
function checkNumberFields(){var a=!0;$.each($(".relativeDateRangeValue"),function(){$.isNumeric(this.value)&&(isPositiveInteger(this.value)?($(this).parent().removeClass("has-error"),$(this).parent().find(".notValidNumberErrorMessage").hide()):(a=!1,$(this).parent().addClass("has-error"),$(this).parent().find(".notValidNumberErrorMessage").show()))});$.each($(".queryExpressionValues #selectValue"),function(b,f){-1<$(".toAddContainerQEV").find("#selectOperator")[b].value.search("LAST_X")&&!isEmpty(this.value)&&
(isPositiveInteger(this.value)?$(f).parents().eq(1).find(".errorMessageOperator").hide():(a=!1,$(f).parents().eq(1).find(".errorMessageOperator").show()))});return a};